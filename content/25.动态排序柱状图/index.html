<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <!-- 引入下载的 echarts.js 文件 -->
    <script type="text/javascript" src="js/echarts.js"></script>
    <title>ECharts图表</title>
</head>

<body>
    <!-- 为 ECharts 准备一个定义了宽高的 DOM -->
    <div id="container" style="width:600px;height:400px;"></div>
    <script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('container'));

    var year = [2023, 2022, 2021, 2020, 2019, 2018, 2017, 2016, 2015, 2014, 2013, 2012, 2011, 2010, 2009, 2008, 2007, 2006, 2005, 2004]
    var data = [
        [500, 390, 400, 600],
        [450, 380, 500, 580],
        [420, 360, 480, 550],
        [430, 330, 370, 500],
        [410, 350, 450, 440],
        [400, 300, 360, 440],
        [380, 310, 480, 350],
        [350, 320, 360, 360],
        [340, 310, 450, 300],
        [320, 300, 430, 280],
        [310, 320, 410, 240],
        [300, 310, 430, 230],
        [350, 300, 400, 220],
        [310, 290, 380, 250],
        [290, 280, 420, 220],
        [260, 270, 400, 190],
        [220, 250, 410, 180],
        [200, 240, 400, 170],
        [150, 220, 380, 180],
        [220, 300, 400, 120]
    ]

    // 设置图表的参数
    var option = {
        title: {
            text: "各品类销量"
        },

        tooltip: {},

        // 图例
        legend: {
            data: ["销量"]
        },


        // x轴
        xAxis: {
            type: "value",
            
        },

        // y轴
        yAxis: {
            type: "category",
            data: ['品类1', '品类2', '品类3', '品类4'],
            inverse:true, //是否是反向坐标轴
            // max:2, // 如果想只显示前 n 名，将 yAxis.max 设为 n - 1，否则显示所有柱条
        },


        // 数据系列
        series: [{
            name: "销量",
            type: "bar",
            label: {
                show: true,
                position: "right",
                fontWeight: "bold",
                valueAnimation: true // 是否开启动画，开启后数值标签会连续变化
            },
            data: [220, 300, 400, 120],
            realtimeSort:true, // 是否开启实时排序，用来实现动态排序图效果
        }],
        animationDuration: 100, // 初始动画的时长
        animationDurationUpdate: 2000, // 数据更新动画的时长
        animationEasing: 'linear', // 初始动画的缓动效果
        animationEasingUpdate: 'linear', // 数据更新动画的缓动效果
    };


    // 使用指定的配置项和数据显示图表
    myChart.setOption(option);

    // 更新数据
    for(let i = 0;i < data.length;i++){
        // setTimeout()方法用于在指定的毫秒数后调用函数或计算表达式。
        // setTimeout方法接收两个参数，第一个参数为回调函数函数或字符串，第二个参数为触发时间(单位：毫秒)
        setTimeout(function(){
            var option1 = {
                title:{text:year[data.length-i-1].toString()+"年销量"}, //更新标题
                series:[{
                    data:data[data.length-i-1] // 更新数据
                }]
            }
            // console.log(option1)
            myChart.setOption(option1) // 使用指定的配置项和数据显示图表
        } , 2000*i)
    }
    </script>
</body>

</html>-